# Media Dependencies and Network Types

## OSPF Network Types
### OSPF Media Dependencies
- OSPF's behaviro changes depending on what type of media it is configured on
  - e.g. Ethernet vs Frame Relay vs. PPP
- OSPF defines different 'network types' to deal with different media characteristics
- OSPF network types control:
  - How are hellos & updates sent?
  - Who forms adjacency?
  - How is the next-hop calculated

- Network types
  - Broadcast
  - Non-Broadcast
  - Point-to-Point
  - Point-to-Multipoint
  - Point-to-Multipoint Non-Broadcast
  - Loopback
- OSPF network type does not need to match to form adjacency
  - The types do need to be compatible
  - Other attributes must still match
    - E.g. times
- LSA type 2 Review
  - Network LSA
  - Generated by Designated Router
    - Describes who is adjacent with DR
    - Not flooded outside the area they originate in
  - Used to optimize OSPF operation on a shared segment
    - Reduce number of OSPF adjacencies
    - Reduce LSA flooding replication
    - Simplify SPF calculation 
### Network Type Compatibilities
- Network types that use Type 2 LSA
  - Broadcast
  - Non-Broadcast
- Network types that do not use Type 2 LSA
  - Point-to-Point
  - Point-to-Multipoint
  - Point-to-Multipoint Non-Broadcast

- OSPF Network Broadcast
  - Default on multi-access broadcast medias
    - Ethernet
    - Token Ring
    - FDDI
  - Send Hellos and Updates as Multicast
    - 224.0.0.5 (All SPF Routers)
    - 224.0.0.6 (All DRouters)
  - Uses DR & BDR
    - I.e uses Type 2 LSA
- OSPF Network Non-Broadcast
  - Default on multipoint NBMA medias
    - Frame Relay & ATM
  - Sends hellos as unicast
    - Manually defined addresses with neighbor command
  - Uses DR & BDR
    - I.e uses Type 2 LSA


## DR/BDR Election Process
- Designated Router (DR)
  - Forms adjacency with all routers on the link
  - Listens for LSUs (224.0.0.6)
  - Re-floods LSUs back to the segment (224.0.0.5)
  - Does not modify next-hop value
- Backup Designated Router (BDR)
  - Used for redundancy of DR
  - Does not re-flood LSUs
- DROthers
  - All other routers on link
    - I.e not the DR or BDR
  - Form FULL adjacency with DR & BDR
  - Stop at 2-Way adjacency with each other
- DR/BDR Election
  - DR/BDR chosen through election process
  - Election based on interface priority and Router-ID
    - Priority
      - 0-255
      - Higher better
      - 0 = never
    - Router-ID
      - Highest loopback / interface IP
      - Can be statically set
      - Higher better
  - Uses WAIT timer to stop pre-emption of current DR/BDR
    - Unlike IS-IS's Designated Intermediate System (DIS)

## Point-to-Point/Multipoint

- Network Point-to-Point
  - Default on point-to-point medias
    - E.g. HDLC, PPP, GRE
  - Sends hellos as multicast
    - 224.0.0.5
  - No DR/BDR Election
- Network Point-to-Multipoint
  - Treat network as a collection of P2P links
  - Sends hellos as multicast
    - 224.0.0.5
  - No DR/BDR Election
  - Special Next-hop processing
  - Usually the best design option for partial mesh NBMA networks
- Point-to-Multipoint Non-Broadcast
  - Same as point-to-multipoint, but sends hellos as unicast
    - Manually defined addresses with **neighbor** command
    - Allows for per-VC OSPF cost over NBMA
  - No DR/BDR Election
  - Special Next Hop processing
- Network Loopback
  - Special Case for Loopback and Looped-back interfaces
  - Advertises link as /32 stub host route
  - **ip ospf network point-to-point** used to disable this behavior